import{c as g,d as p,a as y,r as c,R as j,j as t,L as b,O as v,e as N}from"./index-VcNFqetI.js";import{u as w}from"./useQuery-Rt3S72ZS.js";import{u as S}from"./cartStore-BzO2gdoy.js";import{P as k}from"./PoweredBy-CVbRoZwM.js";function I(){var i;const{slug:a}=g(),[l]=p(),{setTenantId:T,setTableId:m,setOrderType:d}=S(),{branding:x}=y(),u=c.useRef(document.title),o=c.useRef((i=document.querySelector("link[rel~='icon']"))==null?void 0:i.href),r=l.get("table"),n=l.get("type")||(r?"dine":"parcel");j.useEffect(()=>{r&&m(parseInt(r)),d(n)},[a,r,n]);const{data:e,isLoading:f,error:h}=w({queryKey:["restaurant",a],queryFn:()=>N.restaurant(a).then(s=>s.data.data)});return c.useEffect(()=>{if(e&&(e.name&&(document.title=e.name),e.favicon)){let s=document.querySelector("link[rel~='icon']");s||(s=document.createElement("link"),s.rel="icon",document.head.appendChild(s)),s.href="/storage/"+e.favicon}return()=>{document.title=u.current||x.platform_name||"RestaurantSaaS";const s=document.querySelector("link[rel~='icon']");s&&o.current&&(s.href=o.current)}},[e]),f?t.jsx(b,{fullScreen:!0}):h?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 px-4",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Restaurant Unavailable"}),t.jsx("p",{className:"text-gray-500",children:"This restaurant is currently not accepting orders."})]})}):t.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[t.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",style:{borderBottom:`3px solid ${(e==null?void 0:e.primary_color)||"#3B82F6"}`},children:t.jsxs("div",{className:"max-w-lg mx-auto px-4 py-3 flex items-center",children:[(e==null?void 0:e.logo)&&t.jsx("img",{src:`/storage/${e.logo}`,alt:"",className:"w-8 h-8 rounded-full mr-3 object-cover"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:e==null?void 0:e.name}),r&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Table ",r," Â· Dine-in"]}),!r&&t.jsx("p",{className:"text-xs text-gray-500",children:"Takeaway Order"})]})]})}),(e==null?void 0:e.banner_image)&&t.jsx("div",{className:"max-w-lg mx-auto w-full",children:t.jsx("img",{src:`/storage/${e.banner_image}`,alt:"",className:"w-full h-40 object-cover"})}),t.jsx("div",{className:"max-w-lg mx-auto flex-1 w-full",children:t.jsx(v,{context:{restaurant:e,slug:a,tableId:r,orderType:n}})}),t.jsx("footer",{className:"py-4 text-center",children:t.jsx(k,{})})]})}export{I as default};
