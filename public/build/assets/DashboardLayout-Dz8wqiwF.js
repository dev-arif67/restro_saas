import{u as T,a as z,b as B,r as n,c as R,j as e,O as U,N as w}from"./index-C-fHFgbm.js";import{P as $}from"./PoweredBy-B1RzqvyF.js";import{H as O,a as q,b as K,c as V,d as W,e as X,f as _,g as k,h as G,i as J,j as Q,k as H,l as Y,m as Z,n as ee,o as se,p as C,q as ae,r as te,s as ne,t as re,u as ie,v as le,w as oe}from"./index-CmYeZnUY.js";import{H as de,a as ce}from"./index-Bg96fwby.js";import"./iconBase-b9VFOml0.js";const me=[{icon:k,label:"Dashboard",to:"/dashboard",roles:["restaurant_admin","staff"]},{icon:ae,label:"POS Terminal",to:"/dashboard/pos",roles:["restaurant_admin","staff"]},{icon:te,label:"Orders",to:"/dashboard/orders",roles:["restaurant_admin","staff"]},{icon:_,label:"Menu Items",to:"/dashboard/menu",roles:["restaurant_admin"]},{icon:ne,label:"Categories",to:"/dashboard/categories",roles:["restaurant_admin"]},{icon:re,label:"Tables",to:"/dashboard/tables",roles:["restaurant_admin","staff"]},{icon:ie,label:"Vouchers",to:"/dashboard/vouchers",roles:["restaurant_admin"]},{icon:le,label:"Reports",to:"/dashboard/reports",roles:["restaurant_admin"]},{icon:H,label:"Settlements",to:"/dashboard/settlements",roles:["restaurant_admin"]},{icon:oe,label:"Users",to:"/dashboard/users",roles:["restaurant_admin"]},{icon:C,label:"Settings",to:"/dashboard/settings",roles:["restaurant_admin"]}],ue=[{icon:k,label:"Dashboard",to:"/dashboard/admin",roles:["super_admin"]},{icon:G,label:"Tenants",to:"/dashboard/admin/tenants",roles:["super_admin"]},{icon:J,label:"Subscriptions",to:"/dashboard/admin/subscriptions",roles:["super_admin"]},{icon:Q,label:"Plans",to:"/dashboard/admin/plans",roles:["super_admin"]},{icon:H,label:"Financials",to:"/dashboard/admin/financials",roles:["super_admin"]},{icon:Y,label:"Announcements",to:"/dashboard/admin/announcements",roles:["super_admin"]},{icon:Z,label:"Enquiries",to:"/dashboard/admin/enquiries",roles:["super_admin"]},{icon:ee,label:"System",to:"/dashboard/admin/system",roles:["super_admin"]},{icon:se,label:"Audit Logs",to:"/dashboard/admin/audit-logs",roles:["super_admin"]},{icon:C,label:"Platform Settings",to:"/dashboard/admin/settings",roles:["super_admin"]}],he=s=>s==="super_admin"?ue:me.filter(d=>d.roles.includes(s));function je(){var p,j,y;const{user:s,logout:d,updateUser:S}=T(),{branding:r}=z(),g=B(),[E,i]=n.useState(!1),[c,L]=n.useState(!1),[b,m]=n.useState(!1),[P,l]=n.useState(!1),[D,u]=n.useState(!1),h=n.useRef(null),x=n.useRef(null),F=()=>{d(),g("/login")},A=n.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>m(!1)).catch(()=>{}):document.documentElement.requestFullscreen().then(()=>m(!0)).catch(()=>{})},[]);n.useEffect(()=>{R.me().then(a=>{var o,N,v;const t=((N=(o=a.data)==null?void 0:o.data)==null?void 0:N.user)??((v=a.data)==null?void 0:v.user);t&&S(t)}).catch(()=>{})},[]),n.useEffect(()=>{const a=()=>m(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",a),()=>document.removeEventListener("fullscreenchange",a)},[]),n.useEffect(()=>{const a=t=>{h.current&&!h.current.contains(t.target)&&l(!1),x.current&&!x.current.contains(t.target)&&u(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const I=he(s==null?void 0:s.role),M=c?"w-[72px]":"w-64",f=({collapsed:a=!1})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 shrink-0",children:[e.jsxs("div",{className:"flex items-center overflow-hidden",children:[r.platform_logo?e.jsx("img",{src:`/storage/${r.platform_logo}`,alt:r.platform_name,className:"h-8"}):e.jsx("img",{src:"/assets/images/logo.png",alt:"Logo",className:"h-8"}),!a&&r.platform_name&&e.jsx("span",{className:"ml-2 text-sm font-bold text-gray-800 truncate hidden lg:inline",children:r.platform_name})]}),e.jsx("button",{onClick:()=>i(!1),className:"md:hidden text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:[I.map(t=>e.jsxs(w,{to:t.to,end:t.to==="/dashboard",onClick:()=>i(!1),title:a?t.label:void 0,className:({isActive:o})=>`flex items-center ${a?"justify-center px-2":"px-3"} py-2.5 text-sm font-medium rounded-lg transition-colors ${o?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(t.icon,{className:"w-5 h-5 shrink-0"}),!a&&e.jsx("span",{className:"ml-3 truncate",children:t.label})]},t.to)),(s==null?void 0:s.role)!=="super_admin"&&e.jsxs(w,{to:"/kitchen",onClick:()=>i(!1),title:a?"Kitchen Display":void 0,className:`flex items-center ${a?"justify-center px-2":"px-3"} py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg`,children:[e.jsx(_,{className:"w-5 h-5 shrink-0"}),!a&&e.jsx("span",{className:"ml-3",children:"Kitchen Display"})]})]}),!a&&e.jsx("div",{className:"border-t border-gray-200 p-4 shrink-0",children:(s==null?void 0:s.role)!=="super_admin"&&e.jsx("div",{className:"text-center",children:e.jsx($,{})})})]});return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[E&&e.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>i(!1)}),e.jsx("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white flex flex-col shadow-xl",children:e.jsx(f,{collapsed:!1})})]}),e.jsx("aside",{className:`hidden md:flex md:flex-col ${M} bg-white border-r border-gray-200 shrink-0 transition-all duration-300`,children:e.jsx(f,{collapsed:c})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("header",{className:"flex items-center justify-between h-16 px-4 md:px-6 bg-white border-b border-gray-200 sticky top-0 z-30 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(!0),className:"md:hidden text-gray-500 hover:text-gray-700 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(O,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>L(a=>!a),className:"hidden md:flex text-gray-500 hover:text-gray-700 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",title:c?"Expand sidebar":"Collapse sidebar",children:e.jsx(O,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:A,className:"hidden sm:flex text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:b?"Exit fullscreen":"Fullscreen",children:b?e.jsx(de,{className:"w-5 h-5"}):e.jsx(ce,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative",ref:x,children:[e.jsxs("button",{onClick:()=>{u(a=>!a),l(!1)},className:"relative text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Notifications",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full ring-2 ring-white"})]}),D&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg ring-1 ring-gray-200 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"})}),e.jsx("div",{className:"max-h-72 overflow-y-auto divide-y divide-gray-100",children:e.jsx("div",{className:"px-4 py-8 text-center text-sm text-gray-400",children:"No new notifications"})})]})]}),e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{onClick:()=>{l(a=>!a),u(!1)},className:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium shrink-0",children:(j=(p=s==null?void 0:s.name)==null?void 0:p[0])==null?void 0:j.toUpperCase()}),e.jsxs("div",{className:"hidden sm:block text-left min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-[120px]",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-400 capitalize",children:(y=s==null?void 0:s.role)==null?void 0:y.replace("_"," ")})]}),e.jsx(K,{className:"w-4 h-4 text-gray-400 hidden sm:block"})]}),P&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg ring-1 ring-gray-200 z-50 py-1",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]}),e.jsxs("button",{onClick:()=>{l(!1),g("/dashboard/settings")},className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(V,{className:"w-4 h-4 mr-3 text-gray-400"}),"Profile & Settings"]}),e.jsx("div",{className:"border-t border-gray-100",children:e.jsxs("button",{onClick:F,className:"flex items-center w-full px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(W,{className:"w-4 h-4 mr-3"}),"Logout"]})})]})]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6 lg:p-8",children:e.jsx(U,{})})})]})]})}export{je as default};
