import{u as Z,a as B,b as F,r as t,j as e,O as z,N as v}from"./index-VcNFqetI.js";import{P as D}from"./PoweredBy-CVbRoZwM.js";import{G as N,H as M,a as V,b as I,c as w,d as T,e as $,f as A,g as U,h as q,i as G,j,k as K,l as W,m as y,n as X,o as J,p as Q,q as Y,r as ee}from"./index-DXY5cShP.js";function se(s){return N({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3.22 3.22a.75.75 0 0 1 1.06 0l3.97 3.97V4.5a.75.75 0 0 1 1.5 0V9a.75.75 0 0 1-.75.75H4.5a.75.75 0 0 1 0-1.5h2.69L3.22 4.28a.75.75 0 0 1 0-1.06Zm17.56 0a.75.75 0 0 1 0 1.06l-3.97 3.97h2.69a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75V4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0ZM3.75 15a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-2.69l-3.97 3.97a.75.75 0 0 1-1.06-1.06l3.97-3.97H4.5a.75.75 0 0 1-.75-.75Zm10.5 0a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-2.69l3.97 3.97a.75.75 0 1 1-1.06 1.06l-3.97-3.97v2.69a.75.75 0 0 1-1.5 0V15Z",clipRule:"evenodd"},child:[]}]})(s)}function ae(s){return N({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M15 3.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0V5.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l3.97-3.97h-2.69a.75.75 0 0 1-.75-.75Zm-12 0A.75.75 0 0 1 3.75 3h4.5a.75.75 0 0 1 0 1.5H5.56l3.97 3.97a.75.75 0 0 1-1.06 1.06L4.5 5.56v2.69a.75.75 0 0 1-1.5 0v-4.5Zm11.47 11.78a.75.75 0 1 1 1.06-1.06l3.97 3.97v-2.69a.75.75 0 0 1 1.5 0v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h2.69l-3.97-3.97Zm-4.94-1.06a.75.75 0 0 1 0 1.06L5.56 19.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"},child:[]}]})(s)}const te=[{icon:M,label:"Dashboard",to:"/dashboard",roles:["super_admin","restaurant_admin","staff"]},{icon:V,label:"POS Terminal",to:"/dashboard/pos",roles:["restaurant_admin","staff"]},{icon:I,label:"Orders",to:"/dashboard/orders",roles:["restaurant_admin","staff"]},{icon:w,label:"Menu Items",to:"/dashboard/menu",roles:["restaurant_admin"]},{icon:T,label:"Categories",to:"/dashboard/categories",roles:["restaurant_admin"]},{icon:$,label:"Tables",to:"/dashboard/tables",roles:["restaurant_admin","staff"]},{icon:A,label:"Vouchers",to:"/dashboard/vouchers",roles:["restaurant_admin"]},{icon:U,label:"Reports",to:"/dashboard/reports",roles:["restaurant_admin"]},{icon:q,label:"Settlements",to:"/dashboard/settlements",roles:["restaurant_admin"]},{icon:G,label:"Users",to:"/dashboard/users",roles:["restaurant_admin"]},{icon:j,label:"Settings",to:"/dashboard/settings",roles:["restaurant_admin"]},{icon:K,label:"Tenants",to:"/dashboard/tenants",roles:["super_admin"]},{icon:W,label:"Subscriptions",to:"/dashboard/subscriptions",roles:["super_admin"]},{icon:j,label:"Platform Settings",to:"/dashboard/platform-settings",roles:["super_admin"]}];function ie(){var f,b,p;const{user:s,logout:O}=Z(),{branding:r}=B(),x=F(),[C,n]=t.useState(!1),[o,H]=t.useState(!1),[u,d]=t.useState(!1),[k,i]=t.useState(!1),[_,c]=t.useState(!1),m=t.useRef(null),h=t.useRef(null),S=()=>{O(),x("/login")},L=t.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>d(!1)).catch(()=>{}):document.documentElement.requestFullscreen().then(()=>d(!0)).catch(()=>{})},[]);t.useEffect(()=>{const a=()=>d(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",a),()=>document.removeEventListener("fullscreenchange",a)},[]),t.useEffect(()=>{const a=l=>{m.current&&!m.current.contains(l.target)&&i(!1),h.current&&!h.current.contains(l.target)&&c(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const E=te.filter(a=>a.roles.includes(s==null?void 0:s.role)),R=o?"w-[72px]":"w-64",g=({collapsed:a=!1})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 shrink-0",children:[e.jsxs("div",{className:"flex items-center overflow-hidden",children:[r.platform_logo?e.jsx("img",{src:`/storage/${r.platform_logo}`,alt:r.platform_name,className:"h-8"}):e.jsx("img",{src:"/assets/images/logo.png",alt:"Logo",className:"h-8"}),!a&&r.platform_name&&e.jsx("span",{className:"ml-2 text-sm font-bold text-gray-800 truncate hidden lg:inline",children:r.platform_name})]}),e.jsx("button",{onClick:()=>n(!1),className:"md:hidden text-gray-400 hover:text-gray-600",children:e.jsx(ee,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:[E.map(l=>e.jsxs(v,{to:l.to,end:l.to==="/dashboard",onClick:()=>n(!1),title:a?l.label:void 0,className:({isActive:P})=>`flex items-center ${a?"justify-center px-2":"px-3"} py-2.5 text-sm font-medium rounded-lg transition-colors ${P?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(l.icon,{className:"w-5 h-5 shrink-0"}),!a&&e.jsx("span",{className:"ml-3 truncate",children:l.label})]},l.to)),(s==null?void 0:s.role)!=="super_admin"&&e.jsxs(v,{to:"/kitchen",onClick:()=>n(!1),title:a?"Kitchen Display":void 0,className:`flex items-center ${a?"justify-center px-2":"px-3"} py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg`,children:[e.jsx(w,{className:"w-5 h-5 shrink-0"}),!a&&e.jsx("span",{className:"ml-3",children:"Kitchen Display"})]})]}),!a&&e.jsx("div",{className:"border-t border-gray-200 p-4 shrink-0",children:(s==null?void 0:s.role)!=="super_admin"&&e.jsx("div",{className:"text-center",children:e.jsx(D,{})})})]});return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[C&&e.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>n(!1)}),e.jsx("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white flex flex-col shadow-xl",children:e.jsx(g,{collapsed:!1})})]}),e.jsx("aside",{className:`hidden md:flex md:flex-col ${R} bg-white border-r border-gray-200 shrink-0 transition-all duration-300`,children:e.jsx(g,{collapsed:o})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("header",{className:"flex items-center justify-between h-16 px-4 md:px-6 bg-white border-b border-gray-200 sticky top-0 z-30 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(!0),className:"md:hidden text-gray-500 hover:text-gray-700 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(y,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>H(a=>!a),className:"hidden md:flex text-gray-500 hover:text-gray-700 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",title:o?"Expand sidebar":"Collapse sidebar",children:e.jsx(y,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:L,className:"hidden sm:flex text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:u?"Exit fullscreen":"Fullscreen",children:u?e.jsx(se,{className:"w-5 h-5"}):e.jsx(ae,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{onClick:()=>{c(a=>!a),i(!1)},className:"relative text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Notifications",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full ring-2 ring-white"})]}),_&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg ring-1 ring-gray-200 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"})}),e.jsx("div",{className:"max-h-72 overflow-y-auto divide-y divide-gray-100",children:e.jsx("div",{className:"px-4 py-8 text-center text-sm text-gray-400",children:"No new notifications"})})]})]}),e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{onClick:()=>{i(a=>!a),c(!1)},className:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium shrink-0",children:(b=(f=s==null?void 0:s.name)==null?void 0:f[0])==null?void 0:b.toUpperCase()}),e.jsxs("div",{className:"hidden sm:block text-left min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-[120px]",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-400 capitalize",children:(p=s==null?void 0:s.role)==null?void 0:p.replace("_"," ")})]}),e.jsx(J,{className:"w-4 h-4 text-gray-400 hidden sm:block"})]}),k&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg ring-1 ring-gray-200 z-50 py-1",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]}),e.jsxs("button",{onClick:()=>{i(!1),x("/dashboard/settings")},className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4 mr-3 text-gray-400"}),"Profile & Settings"]}),e.jsx("div",{className:"border-t border-gray-100",children:e.jsxs("button",{onClick:S,className:"flex items-center w-full px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Y,{className:"w-4 h-4 mr-3"}),"Logout"]})})]})]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6 lg:p-8",children:e.jsx(z,{})})})]})]})}export{ie as default};
