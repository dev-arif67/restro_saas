import{r as u,F as $,j as e,z as P,f as A,g as M,G as R,L as E,h as O,i as H}from"./index-CanGr6k3.js";import{u as T}from"./useQuery-Dl6J-XZU.js";import{u as C}from"./cartStore-D_LEivut.js";import{c as q,S as g}from"./sparkles-DnDJzz0X.js";import{S}from"./star-CEHK2ngD.js";import{C as Q}from"./clock-ccyvP83v.js";import{E as I,e as Y,r as B}from"./index-c6C0Wc7z.js";import"./iconBase-CaRTzVFD.js";/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],G=q("plus",D);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],L=q("users",K),U={popular:S,time_based:Q,complementary:L,ai:g,fbt:L,category:S,random:g},V=({tenantSlug:i,primaryColor:n="#ED802A"})=>{const[m,d]=u.useState([]),[y,o]=u.useState(!0),[c,N]=u.useState({}),{items:h,addItem:f,updateQty:l}=C();u.useEffect(()=>{p()},[i,h.length]);const p=async()=>{try{o(!0);const t=h.map(x=>({menu_item_id:x.menu_item_id})),r=await $.get(i,t,6);r.data.success&&(d(r.data.recommendations||[]),N(r.data.context||{}))}catch(t){console.error("Failed to load recommendations:",t)}finally{o(!1)}},v=t=>{const r=h.find(x=>x.menu_item_id===t.id);r?l(t.id,r.qty+1):f({id:t.id,name:t.name,price:t.price,image:t.image}),P.success(`${t.name} added`,{duration:1200,icon:"ðŸ›’",style:{fontSize:"14px"}})};if(y)return e.jsxs("div",{className:"px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(g,{className:"w-5 h-5",style:{color:n}}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Recommended for You"})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex-shrink-0 w-36 bg-gray-100 rounded-xl animate-pulse",children:[e.jsx("div",{className:"h-24 bg-gray-200 rounded-t-xl"}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},t))})]});if(m.length===0)return null;const w=c.has_cart?"Complete Your Order":c.time_of_day==="breakfast"?"Breakfast Picks":c.time_of_day==="lunch"?"Lunch Favorites":c.time_of_day==="dinner"?"Dinner Specials":"Recommended for You";return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"px-4 flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg",style:{backgroundColor:`${n}15`},children:e.jsx(g,{className:"w-4 h-4",style:{color:n}})}),e.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:w})]}),c.has_cart&&e.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded-full",children:"AI picks"})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 px-4 scrollbar-hide",children:m.map(t=>{const r=U[t.recommendation_type]||g;return e.jsxs("div",{className:"flex-shrink-0 w-36 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative h-24 bg-gray-100",children:[t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl",children:"ðŸ½ï¸"}),e.jsx("div",{className:"absolute top-2 left-2 flex items-center gap-1 px-1.5 py-0.5 rounded-full text-white text-[10px] font-medium",style:{backgroundColor:n},children:e.jsx(r,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>v(t),className:"absolute bottom-2 right-2 w-7 h-7 rounded-full text-white flex items-center justify-center shadow-lg transition-transform hover:scale-110 active:scale-95",style:{backgroundColor:n},children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm truncate",children:t.name}),e.jsx("p",{className:"text-xs text-gray-400 truncate mt-0.5",children:t.recommendation_reason}),e.jsxs("p",{className:"text-sm font-bold mt-1",style:{color:n},children:["à§³",t.price]})]})]},t.id)})})]})};function le(){var _;const{slug:i}=A(),[n]=M(),{restaurant:m}=R()||{},[d,y]=u.useState(null),[o,c]=u.useState(""),{addItem:N,updateQty:h,items:f}=C(),l=(m==null?void 0:m.primary_color)||"#3B82F6",{data:p,isLoading:v}=T({queryKey:["customer-menu",i],queryFn:()=>H.menu(i).then(s=>s.data.data)}),w=s=>{const a=f.find(b=>b.menu_item_id===s.id);a?h(s.id,a.qty+1):N(s),P.success(`${s.name} added`,{duration:1200,icon:"ðŸ›’",style:{fontSize:"14px"}})};if(v)return e.jsx(E,{});const t=(p==null?void 0:p.categories)||[],r=t.flatMap(s=>s.menu_items||[]),x=d?((_=t.find(s=>s.id===d))==null?void 0:_.menu_items)||[]:r,k=o?x.filter(s=>s.name.toLowerCase().includes(o.toLowerCase())):x,j=f.reduce((s,a)=>s+a.qty,0),z=C.getState().getSubtotal();return e.jsxs("div",{className:"pb-28",children:[e.jsx("div",{className:"sticky top-[60px] z-30 bg-gray-50 px-3 pt-3 pb-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-10 py-3 rounded-xl border border-gray-200 bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none text-sm shadow-sm",placeholder:"Search menu items...",value:o,onChange:s=>c(s.target.value)}),o&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Y,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"sticky top-[120px] z-20 bg-gray-50 px-3 pb-2",children:e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide -mx-1 px-1",children:[e.jsxs("button",{onClick:()=>y(null),className:"px-4 py-2 rounded-full text-xs font-semibold whitespace-nowrap transition-all shadow-sm",style:d?{backgroundColor:"#f3f4f6",color:"#4b5563"}:{backgroundColor:l,color:"#fff"},children:["All (",r.length,")"]}),t.map(s=>{var a;return e.jsxs("button",{onClick:()=>y(s.id),className:"px-4 py-2 rounded-full text-xs font-semibold whitespace-nowrap transition-all shadow-sm",style:d===s.id?{backgroundColor:l,color:"#fff"}:{backgroundColor:"#f3f4f6",color:"#4b5563"},children:[s.name," (",((a=s.menu_items)==null?void 0:a.length)||0,")"]},s.id)})]})}),!o&&!d&&e.jsx(V,{tenantSlug:i,primaryColor:l}),o&&e.jsx("div",{className:"px-3 pt-1 pb-2",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[k.length,' items found for "',o,'"']})}),e.jsx("div",{className:"px-3 pt-1",children:k.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(I,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"No items found"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Try a different search term"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:k.map(s=>{const a=f.find(F=>F.menu_item_id===s.id),b=s.image_url||(s.image?`/storage/${s.image}`:null);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden flex flex-col transition-transform active:scale-[0.98]",children:[b?e.jsxs("div",{className:"w-full aspect-[4/3] bg-gray-100 relative overflow-hidden",children:[e.jsx("img",{src:b,alt:s.name,className:"w-full h-full object-cover",loading:"lazy"}),a&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full text-white text-xs font-bold flex items-center justify-center shadow-md",style:{backgroundColor:l},children:a.qty})]}):e.jsxs("div",{className:"w-full aspect-[4/3] bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center relative",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ½ï¸"}),a&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full text-white text-xs font-bold flex items-center justify-center shadow-md",style:{backgroundColor:l},children:a.qty})]}),e.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm leading-tight line-clamp-2",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-1",children:s.description}),e.jsxs("div",{className:"mt-auto pt-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-base font-bold",style:{color:l},children:["à§³",parseFloat(s.price).toFixed(0)]}),e.jsx("button",{onClick:()=>w(s),className:"w-8 h-8 rounded-full text-white flex items-center justify-center text-lg shadow-md transition-all active:scale-90 hover:shadow-lg",style:{backgroundColor:l},children:"+"})]})]})]},s.id)})})}),j>0&&e.jsx("div",{className:"fixed bottom-4 left-3 right-3 max-w-lg mx-auto z-50",children:e.jsxs(O,{to:`/restaurant/${i}/cart?${n.toString()}`,className:"flex items-center justify-between rounded-2xl py-3.5 px-5 shadow-xl text-white transition-all active:scale-[0.98]",style:{backgroundColor:l},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-white rounded-full text-[10px] font-bold flex items-center justify-center",style:{color:l},children:j})]}),e.jsxs("span",{className:"font-medium text-sm",children:[j," ",j===1?"item":"items"]})]}),e.jsx("span",{className:"font-bold text-sm",children:"View Cart"}),e.jsxs("span",{className:"font-bold text-sm",children:["à§³",z.toFixed(0)]})]})})]})}export{le as default};
