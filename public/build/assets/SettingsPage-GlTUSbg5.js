import{r as m,j as e,i as R,z as w,p as S,L as _,s as E}from"./index-B_U3xfNL.js";import{u as C}from"./useQuery-CITVF-0B.js";import{u as L}from"./useMutation-CUUa5Gsz.js";import{o as A,r as B,s as P}from"./index-BkSbYybd.js";const O="/storage/";function f({label:l,currentImage:a,fieldName:i,onFileSelect:c,onRemove:g,hint:b}){const u=m.useRef(null),[h,j]=m.useState(null),p=r=>{const d=r.target.files[0];d&&(j(URL.createObjectURL(d)),c(i,d))},o=h||(a?O+a:null);return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:o?e.jsx("img",{src:o,alt:l,className:"w-full h-full object-contain"}):e.jsx(A,{className:"w-7 h-7 text-gray-400"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{var r;return(r=u.current)==null?void 0:r.click()},className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100",children:[e.jsx(B,{className:"w-4 h-4"})," Upload"]}),o&&e.jsxs("button",{type:"button",onClick:()=>{j(null),g(i)},className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-red-600 bg-red-50 rounded-lg hover:bg-red-100",children:[e.jsx(P,{className:"w-4 h-4"})," Remove"]})]})]}),b&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:b}),e.jsx("input",{ref:u,type:"file",accept:"image/*",className:"hidden",onChange:p})]})}function I(){var v,N,k;const l=R(),[a,i]=m.useState({}),[c,g]=m.useState({}),[b,u]=m.useState({}),{data:h,isLoading:j}=C({queryKey:["tenant-branding"],queryFn:()=>S.get().then(s=>s.data.data)});m.useEffect(()=>{h&&Object.keys(a).length===0&&i(h)},[h]);const p=L({mutationFn:s=>S.update(s),onSuccess:()=>{l.invalidateQueries(["tenant-branding"]),g({}),u({}),w.success("Branding updated!")},onError:s=>{var n,t;return w.error(((t=(n=s.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to update")}}),o=(s,n)=>i(t=>({...t,[s]:n})),r=(s,n)=>{g(t=>({...t,[s]:n})),u(t=>{const x={...t};return delete x[s],x})},d=s=>{u(n=>({...n,[s]:!0})),g(n=>{const t={...n};return delete t[s],t}),i(n=>({...n,[s]:null}))},y=(s,n)=>{i(t=>({...t,social_links:{...t.social_links||{},[s]:n}}))},F=s=>{s.preventDefault();const n=new FormData;["name","description","primary_color","secondary_color","accent_color"].forEach(t=>{a[t]!==void 0&&a[t]!==null&&n.append(t,a[t])}),a.social_links&&Object.entries(a.social_links).forEach(([t,x])=>{n.append(`social_links[${t}]`,x||"")}),Object.entries(c).forEach(([t,x])=>n.append(t,x)),Object.keys(b).forEach(t=>n.append(`remove_${t}`,"1")),p.mutate(n)};return j?e.jsx(_,{}):e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Restaurant Logo & Images"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(f,{label:"Logo",currentImage:a.logo,fieldName:"logo",onFileSelect:r,onRemove:d,hint:"Shown in header & customer menu"}),e.jsx(f,{label:"Logo (Dark)",currentImage:a.logo_dark,fieldName:"logo_dark",onFileSelect:r,onRemove:d,hint:"For dark backgrounds"}),e.jsx(f,{label:"Favicon",currentImage:a.favicon,fieldName:"favicon",onFileSelect:r,onRemove:d,hint:"Browser tab icon"}),e.jsx(f,{label:"Banner",currentImage:a.banner_image,fieldName:"banner_image",onFileSelect:r,onRemove:d,hint:"Customer menu page banner"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Restaurant Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Restaurant Name"}),e.jsx("input",{className:"input",value:a.name||"",onChange:s=>o("name",s.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("textarea",{className:"input",rows:3,value:a.description||"",onChange:s=>o("description",s.target.value),placeholder:"A short description of your restaurant..."})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Brand Colors"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"These colors are used on the customer ordering page."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{key:"primary_color",label:"Primary",default:"#3B82F6"},{key:"secondary_color",label:"Secondary",default:"#1E40AF"},{key:"accent_color",label:"Accent",default:"#F59E0B"}].map(s=>e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[s.label," Color"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:a[s.key]||s.default,onChange:n=>o(s.key,n.target.value),className:"w-12 h-10 rounded border cursor-pointer"}),e.jsx("input",{className:"input flex-1",value:a[s.key]||s.default,onChange:n=>o(s.key,n.target.value)})]})]},s.key))}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Customer Panel Preview:"}),e.jsxs("div",{className:"flex gap-3 items-center flex-wrap",children:[e.jsx("div",{className:"h-9 px-5 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:a.primary_color||"#3B82F6"},children:"Add to Cart"}),e.jsx("div",{className:"h-9 px-5 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:a.secondary_color||"#1E40AF"},children:"View Cart"}),e.jsx("div",{className:"h-9 px-5 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:a.accent_color||"#F59E0B"},children:"Special Offer"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Social Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Facebook"}),e.jsx("input",{className:"input",value:((v=a.social_links)==null?void 0:v.facebook)||"",onChange:s=>y("facebook",s.target.value),placeholder:"https://facebook.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Instagram"}),e.jsx("input",{className:"input",value:((N=a.social_links)==null?void 0:N.instagram)||"",onChange:s=>y("instagram",s.target.value),placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Website"}),e.jsx("input",{className:"input",value:((k=a.social_links)==null?void 0:k.website)||"",onChange:s=>y("website",s.target.value),placeholder:"https://yourwebsite.com"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:p.isPending,className:"btn-primary px-8",children:p.isPending?"Saving...":"Save Branding"})})]})}function D(){const{data:l,isLoading:a}=C({queryKey:["subscription-current"],queryFn:()=>E.current().then(i=>i.data.data)});return a?e.jsx(_,{}):e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Subscription"}),l!=null&&l.subscription?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Plan"}),e.jsx("span",{className:"font-medium capitalize",children:l.subscription.plan_type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:`font-medium ${l.expired?"text-red-600":"text-green-600"}`,children:l.expired?"Expired":"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Expires"}),e.jsx("span",{children:new Date(l.subscription.expires_at).toLocaleDateString()})]}),l.days_remaining!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Days Remaining"}),e.jsxs("span",{className:`font-bold ${l.days_remaining<7?"text-red-600":""}`,children:[l.days_remaining," days"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Amount"}),e.jsxs("span",{className:"font-medium",children:["à§³",l.subscription.amount]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-red-600 font-medium",children:"No active subscription"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Contact support to renew"})]})]})}function z(){const[l,a]=m.useState("branding"),i=[{id:"branding",label:"Branding"},{id:"subscription",label:"Subscription"}];return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Settings"}),e.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 rounded-lg p-1 w-fit",children:i.map(c=>e.jsx("button",{onClick:()=>a(c.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${l===c.id?"bg-white text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:c.label},c.id))}),l==="branding"&&e.jsx(I,{}),l==="subscription"&&e.jsx(D,{})]})}export{z as default};
