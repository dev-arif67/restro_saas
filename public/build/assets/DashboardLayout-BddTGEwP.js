import{u as F,a as z,b as D,r as a,j as e,O as R,N as j}from"./index-BR0FwfB_.js";import{P as B}from"./PoweredBy-B1s0YMUO.js";import{H as T,a as $,b as I,c as v,d as U,e as A,f as M,g as q,h as K,i as V,j as y,k as W,l as X,m as N,n as G,o as J,p as Q,q as Y,r as Z}from"./index-ZurEWDJP.js";import{H as ee,a as se}from"./index-CRmh9voT.js";import"./iconBase-B_g1JB8A.js";const te=[{icon:T,label:"Dashboard",to:"/dashboard",roles:["super_admin","restaurant_admin","staff"]},{icon:$,label:"POS Terminal",to:"/dashboard/pos",roles:["restaurant_admin","staff"]},{icon:I,label:"Orders",to:"/dashboard/orders",roles:["restaurant_admin","staff"]},{icon:v,label:"Menu Items",to:"/dashboard/menu",roles:["restaurant_admin"]},{icon:U,label:"Categories",to:"/dashboard/categories",roles:["restaurant_admin"]},{icon:A,label:"Tables",to:"/dashboard/tables",roles:["restaurant_admin","staff"]},{icon:M,label:"Vouchers",to:"/dashboard/vouchers",roles:["restaurant_admin"]},{icon:q,label:"Reports",to:"/dashboard/reports",roles:["restaurant_admin"]},{icon:K,label:"Settlements",to:"/dashboard/settlements",roles:["restaurant_admin"]},{icon:V,label:"Users",to:"/dashboard/users",roles:["restaurant_admin"]},{icon:y,label:"Settings",to:"/dashboard/settings",roles:["restaurant_admin"]},{icon:W,label:"Tenants",to:"/dashboard/tenants",roles:["super_admin"]},{icon:X,label:"Subscriptions",to:"/dashboard/subscriptions",roles:["super_admin"]},{icon:y,label:"Platform Settings",to:"/dashboard/platform-settings",roles:["super_admin"]}];function oe(){var f,b,p;const{user:s,logout:w}=F(),{branding:n}=z(),h=D(),[O,l]=a.useState(!1),[o,C]=a.useState(!1),[u,d]=a.useState(!1),[k,i]=a.useState(!1),[H,c]=a.useState(!1),m=a.useRef(null),x=a.useRef(null),_=()=>{w(),h("/login")},S=a.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>d(!1)).catch(()=>{}):document.documentElement.requestFullscreen().then(()=>d(!0)).catch(()=>{})},[]);a.useEffect(()=>{const t=()=>d(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",t),()=>document.removeEventListener("fullscreenchange",t)},[]),a.useEffect(()=>{const t=r=>{m.current&&!m.current.contains(r.target)&&i(!1),x.current&&!x.current.contains(r.target)&&c(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const E=te.filter(t=>t.roles.includes(s==null?void 0:s.role)),L=o?"w-[72px]":"w-64",g=({collapsed:t=!1})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 shrink-0",children:[e.jsxs("div",{className:"flex items-center overflow-hidden",children:[n.platform_logo?e.jsx("img",{src:`/storage/${n.platform_logo}`,alt:n.platform_name,className:"h-8"}):e.jsx("img",{src:"/assets/images/logo.png",alt:"Logo",className:"h-8"}),!t&&n.platform_name&&e.jsx("span",{className:"ml-2 text-sm font-bold text-gray-800 truncate hidden lg:inline",children:n.platform_name})]}),e.jsx("button",{onClick:()=>l(!1),className:"md:hidden text-gray-400 hover:text-gray-600",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:[E.map(r=>e.jsxs(j,{to:r.to,end:r.to==="/dashboard",onClick:()=>l(!1),title:t?r.label:void 0,className:({isActive:P})=>`flex items-center ${t?"justify-center px-2":"px-3"} py-2.5 text-sm font-medium rounded-lg transition-colors ${P?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(r.icon,{className:"w-5 h-5 shrink-0"}),!t&&e.jsx("span",{className:"ml-3 truncate",children:r.label})]},r.to)),(s==null?void 0:s.role)!=="super_admin"&&e.jsxs(j,{to:"/kitchen",onClick:()=>l(!1),title:t?"Kitchen Display":void 0,className:`flex items-center ${t?"justify-center px-2":"px-3"} py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg`,children:[e.jsx(v,{className:"w-5 h-5 shrink-0"}),!t&&e.jsx("span",{className:"ml-3",children:"Kitchen Display"})]})]}),!t&&e.jsx("div",{className:"border-t border-gray-200 p-4 shrink-0",children:(s==null?void 0:s.role)!=="super_admin"&&e.jsx("div",{className:"text-center",children:e.jsx(B,{})})})]});return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[O&&e.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>l(!1)}),e.jsx("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white flex flex-col shadow-xl",children:e.jsx(g,{collapsed:!1})})]}),e.jsx("aside",{className:`hidden md:flex md:flex-col ${L} bg-white border-r border-gray-200 shrink-0 transition-all duration-300`,children:e.jsx(g,{collapsed:o})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("header",{className:"flex items-center justify-between h-16 px-4 md:px-6 bg-white border-b border-gray-200 sticky top-0 z-30 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(!0),className:"md:hidden text-gray-500 hover:text-gray-700 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(N,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>C(t=>!t),className:"hidden md:flex text-gray-500 hover:text-gray-700 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",title:o?"Expand sidebar":"Collapse sidebar",children:e.jsx(N,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:S,className:"hidden sm:flex text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:u?"Exit fullscreen":"Fullscreen",children:u?e.jsx(ee,{className:"w-5 h-5"}):e.jsx(se,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative",ref:x,children:[e.jsxs("button",{onClick:()=>{c(t=>!t),i(!1)},className:"relative text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Notifications",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full ring-2 ring-white"})]}),H&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg ring-1 ring-gray-200 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"})}),e.jsx("div",{className:"max-h-72 overflow-y-auto divide-y divide-gray-100",children:e.jsx("div",{className:"px-4 py-8 text-center text-sm text-gray-400",children:"No new notifications"})})]})]}),e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{onClick:()=>{i(t=>!t),c(!1)},className:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium shrink-0",children:(b=(f=s==null?void 0:s.name)==null?void 0:f[0])==null?void 0:b.toUpperCase()}),e.jsxs("div",{className:"hidden sm:block text-left min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-[120px]",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-400 capitalize",children:(p=s==null?void 0:s.role)==null?void 0:p.replace("_"," ")})]}),e.jsx(J,{className:"w-4 h-4 text-gray-400 hidden sm:block"})]}),k&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg ring-1 ring-gray-200 z-50 py-1",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]}),e.jsxs("button",{onClick:()=>{i(!1),h("/dashboard/settings")},className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4 mr-3 text-gray-400"}),"Profile & Settings"]}),e.jsx("div",{className:"border-t border-gray-100",children:e.jsxs("button",{onClick:_,className:"flex items-center w-full px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Y,{className:"w-4 h-4 mr-3"}),"Logout"]})})]})]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6 lg:p-8",children:e.jsx(R,{})})})]})]})}export{oe as default};
