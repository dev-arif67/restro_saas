import{r as x,j as e}from"./index-BR0FwfB_.js";import{K as r}from"./index-ZurEWDJP.js";function g({order:s,restaurant:n,onClose:l}){var o;const d=x.useRef(null),p=()=>{const i=d.current;if(!i)return;const t=window.open("","_blank","width=320,height=600");t.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8" />
                <title>Invoice - ${s.order_number}</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { font-family: 'Courier New', monospace; font-size: 12px; color: #000; width: 80mm; margin: 0 auto; padding: 8px; }
                    .center { text-align: center; }
                    .bold { font-weight: bold; }
                    .divider { border-top: 1px dashed #000; margin: 6px 0; }
                    .row { display: flex; justify-content: space-between; padding: 1px 0; }
                    .item-row { display: flex; justify-content: space-between; padding: 2px 0; }
                    .restaurant-name { font-size: 16px; font-weight: bold; }
                    .order-num { font-size: 14px; font-weight: bold; margin: 4px 0; }
                    .total-row { font-size: 14px; font-weight: bold; }
                    .footer { font-size: 10px; color: #666; margin-top: 8px; }
                    .badge { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: bold; text-transform: uppercase; }
                    .badge-paid { background: #dcfce7; color: #166534; }
                    .badge-pending { background: #fef3c7; color: #92400e; }
                    .badge-cash { background: #e0f2fe; color: #075985; }
                    .badge-online { background: #f3e8ff; color: #6b21a8; }
                    @media print {
                        body { width: 80mm; }
                        @page { size: 80mm auto; margin: 0; }
                    }
                </style>
            </head>
            <body>
                ${i.innerHTML}
            </body>
            </html>
        `),t.document.close(),t.focus(),setTimeout(()=>{t.print(),t.close()},250)};if(!s)return null;const a=s.payment_status==="paid",c={cash:"Cash",card:"Card / POS",mobile_banking:"Mobile Banking",online:"Online"}[s.payment_method]??s.payment_method;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:l,children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-sm w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50 rounded-t-2xl",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Invoice"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(r,{className:"w-4 h-4"})," Print"]}),e.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Close"})]})]}),e.jsxs("div",{ref:d,className:"p-5",children:[e.jsxs("div",{className:"center",style:{textAlign:"center"},children:[(n==null?void 0:n.logo)&&e.jsx("img",{src:`/storage/${n.logo}`,alt:"",style:{height:"40px",margin:"0 auto 6px"}}),e.jsx("div",{className:"restaurant-name",style:{fontSize:"16px",fontWeight:"bold"},children:(n==null?void 0:n.name)||"Restaurant"}),(n==null?void 0:n.address)&&e.jsx("div",{style:{fontSize:"11px",color:"#666",marginTop:"2px"},children:n.address}),(n==null?void 0:n.phone)&&e.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Tel: ",n.phone]})]}),e.jsx("div",{className:"divider",style:{borderTop:"1px dashed #000",margin:"8px 0"}}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{className:"order-num",style:{fontSize:"14px",fontWeight:"bold"},children:s.order_number}),e.jsxs("div",{style:{fontSize:"11px",color:"#666",display:"flex",justifyContent:"center",gap:"8px",flexWrap:"wrap",marginTop:"4px"},children:[e.jsx("span",{style:{textTransform:"capitalize"},children:s.type==="dine"?"Dine-in":"Takeaway"}),s.table&&e.jsxs("span",{children:["| Table ",s.table.table_number]}),e.jsxs("span",{children:["| ",new Date(s.created_at).toLocaleString()]})]})]}),e.jsx("div",{className:"divider",style:{borderTop:"1px dashed #000",margin:"8px 0"}}),(s.customer_name||s.customer_phone)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:"11px"},children:[s.customer_name&&e.jsxs("div",{children:["Customer: ",s.customer_name]}),s.customer_phone&&e.jsxs("div",{children:["Phone: ",s.customer_phone]})]}),e.jsx("div",{className:"divider",style:{borderTop:"1px dashed #000",margin:"8px 0"}})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"11px",marginBottom:"4px"},children:[e.jsx("span",{children:"Item"}),e.jsx("span",{children:"Total"})]}),(o=s.items)==null?void 0:o.map(i=>{var t;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"2px 0",fontSize:"12px"},children:[e.jsxs("span",{children:[i.qty,"x ",((t=i.menu_item)==null?void 0:t.name)||"Item"]}),e.jsxs("span",{children:["৳",parseFloat(i.line_total).toFixed(2)]})]},i.id)})]}),e.jsx("div",{className:"divider",style:{borderTop:"1px dashed #000",margin:"8px 0"}}),e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1px 0"},children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["৳",parseFloat(s.subtotal).toFixed(2)]})]}),parseFloat(s.discount)>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1px 0",color:"#16a34a"},children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-৳",parseFloat(s.discount).toFixed(2)]})]}),parseFloat(s.tax)>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1px 0"},children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{children:["৳",parseFloat(s.tax).toFixed(2)]})]}),e.jsx("div",{className:"divider",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),e.jsxs("div",{className:"total-row",style:{display:"flex",justifyContent:"space-between",fontSize:"15px",fontWeight:"bold"},children:[e.jsx("span",{children:"TOTAL"}),e.jsxs("span",{children:["৳",parseFloat(s.grand_total).toFixed(2)]})]})]}),e.jsx("div",{className:"divider",style:{borderTop:"1px dashed #000",margin:"8px 0"}}),e.jsxs("div",{style:{textAlign:"center",fontSize:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"6px",flexWrap:"wrap"},children:[e.jsx("span",{className:`badge ${s.payment_method==="cash"?"badge-cash":"badge-online"}`,style:{display:"inline-block",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",background:s.payment_method==="cash"?"#e0f2fe":s.payment_method==="card"?"#ede9fe":"#f0fdf4",color:s.payment_method==="cash"?"#075985":s.payment_method==="card"?"#5b21b6":"#166534"},children:c}),e.jsx("span",{className:`badge ${a?"badge-paid":"badge-pending"}`,style:{display:"inline-block",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",background:a?"#dcfce7":"#fef3c7",color:a?"#166534":"#92400e"},children:a?"PAID":"UNPAID"})]}),s.transaction_id&&e.jsxs("div",{style:{fontSize:"10px",color:"#666",marginTop:"4px"},children:["TXN: ",s.transaction_id]})]}),e.jsx("div",{className:"divider",style:{borderTop:"1px dashed #000",margin:"8px 0"}}),e.jsxs("div",{className:"footer",style:{textAlign:"center",fontSize:"10px",color:"#666",marginTop:"8px"},children:[e.jsx("p",{children:"Thank you for your order!"}),s.payment_method==="cash"&&!a&&e.jsxs("p",{style:{marginTop:"4px",fontWeight:"bold",color:"#92400e"},children:["Please pay ৳",parseFloat(s.grand_total).toFixed(2)," at the counter"]})]})]})]})})}export{g as P};
