import{i as b,r as o,j as e,L as f,z as m,k as l}from"./index-VcNFqetI.js";import{u as N}from"./useQuery-Rt3S72ZS.js";import{u}from"./useMutation-C8vzS0_Q.js";import{M as y}from"./Modal-DG5C7CFd.js";function k(){const n=b(),[x,a]=o.useState(!1),[t,i]=o.useState(null),{data:r,isLoading:p}=N({queryKey:["categories"],queryFn:()=>l.list().then(s=>s.data.data)}),c=u({mutationFn:s=>t?l.update(t.id,s):l.create(s),onSuccess:()=>{n.invalidateQueries(["categories"]),a(!1),i(null),m.success(t?"Updated":"Created")}}),j=u({mutationFn:s=>l.delete(s),onSuccess:()=>{n.invalidateQueries(["categories"]),m.success("Deleted")}}),h=s=>{s.preventDefault();const d=Object.fromEntries(new FormData(s.target));d.is_active=s.target.is_active.checked,c.mutate(d)};return p?e.jsx(f,{}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Categories"}),e.jsx("button",{onClick:()=>{i(null),a(!0)},className:"btn-primary text-sm sm:text-base",children:"+ Add Category"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r==null?void 0:r.map(s=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.menu_items_count||0," items"]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.description}),e.jsxs("div",{className:"flex gap-3 mt-4 pt-3 border-t",children:[e.jsx("button",{onClick:()=>{i(s),a(!0)},className:"text-sm text-blue-600",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Delete?")&&j.mutate(s.id)},className:"text-sm text-red-600",children:"Delete"})]})]},s.id))}),e.jsx(y,{isOpen:x,onClose:()=>a(!1),title:t?"Edit Category":"Add Category",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Name"}),e.jsx("input",{name:"name",className:"input",defaultValue:t==null?void 0:t.name,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("input",{name:"description",className:"input",defaultValue:t==null?void 0:t.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Sort Order"}),e.jsx("input",{name:"sort_order",type:"number",className:"input",defaultValue:(t==null?void 0:t.sort_order)||0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{name:"is_active",type:"checkbox",defaultChecked:(t==null?void 0:t.is_active)??!0,className:"rounded"}),e.jsx("label",{className:"text-sm",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"btn-primary",disabled:c.isPending,children:"Save"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn-secondary",children:"Cancel"})]})]})})]})}export{k as default};
