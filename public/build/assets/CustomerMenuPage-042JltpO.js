import{c as C,d as S,w as I,r as h,j as s,L,g as _,z as $,e as k}from"./index-B_U3xfNL.js";import{u as P}from"./useQuery-CITVF-0B.js";import{u as f}from"./cartStore-D1vKMwcE.js";function M(){var x;const{slug:r}=C(),[p]=S(),{restaurant:q}=I()||{},[a,i]=h.useState(null),[l,b]=h.useState(""),{addItem:j,items:c}=f(),{data:n,isLoading:y}=P({queryKey:["customer-menu",r],queryFn:()=>k.menu(r).then(e=>e.data.data)}),w=e=>{j(e),$.success(`${e.name} added to cart`,{duration:1500,icon:"ðŸ›’"})};if(y)return s.jsx(L,{});const o=(n==null?void 0:n.categories)||[],d=o.flatMap(e=>e.menu_items||[]),u=a?((x=o.find(e=>e.id===a))==null?void 0:x.menu_items)||[]:d,N=l?u.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())):u,m=c.reduce((e,t)=>e+t.qty,0);return s.jsxs("div",{children:[s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Search menu...",value:l,onChange:e=>b(e.target.value)})}),s.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-4 scrollbar-hide",children:[s.jsxs("button",{onClick:()=>i(null),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${a?"bg-gray-100 text-gray-600":"bg-blue-600 text-white"}`,children:["All (",d.length,")"]}),o.map(e=>{var t;return s.jsxs("button",{onClick:()=>i(e.id),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${a===e.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}`,children:[e.name," (",((t=e.menu_items)==null?void 0:t.length)||0,")"]},e.id)})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pb-24",children:N.map(e=>{const t=c.find(v=>v.menu_item_id===e.id),g=e.image_url||(e.image?`/storage/${e.image}`:null);return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col",children:[g?s.jsx("div",{className:"w-full h-36 bg-gray-100",children:s.jsx("img",{src:g,alt:e.name,className:"w-full h-full object-cover"})}):null,s.jsxs("div",{className:"p-4 flex justify-between items-start flex-1",children:[s.jsxs("div",{className:"flex-1 mr-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:e.description}),s.jsxs("p",{className:"text-lg font-bold text-blue-600 mt-2",children:["à§³",e.price]})]}),s.jsxs("button",{onClick:()=>w(e),className:"flex-shrink-0 w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center text-xl hover:bg-blue-700 transition relative",children:["+",t&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center",children:t.qty})]})]})]},e.id)})}),m>0&&s.jsx("div",{className:"fixed bottom-6 left-4 right-4 max-w-lg mx-auto",children:s.jsxs(_,{to:`/restaurant/${r}/cart?${p.toString()}`,className:"flex items-center justify-between bg-blue-600 text-white rounded-2xl py-4 px-6 shadow-lg",children:[s.jsxs("span",{className:"font-medium",children:[m," items"]}),s.jsx("span",{className:"font-bold text-lg",children:"View Cart"}),s.jsxs("span",{className:"font-bold",children:["à§³",f.getState().getSubtotal()]})]})})]})}export{M as default};
